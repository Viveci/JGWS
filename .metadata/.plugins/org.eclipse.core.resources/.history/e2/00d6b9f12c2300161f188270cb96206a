package controller;

import javax.swing.JPanel;

import connection.Client;
import model.mediator.Model;
import model.model.Account;
import model.model.Booking;

import view.BookingPanel;
import view.Dashboard;
import view.LoginPanel;
import view.MyBookingsPanel;
import view.RegisterPanel;
import view.View;

public class ClientController {

   private View view;
   private Model model;
   private Client client;
   
   //Constructors
   public ClientController(Model model, View view){
      this.view = view;
      this.model = model;
   }
   
   //Setters
   public void setConnection(Client client){
      System.out.println("ClientController: has connection");
      this.client = client;
   }
   
   //Checkers
   public boolean hasConnection(){
      return client != null;
   }
   
   public void ping(String msg){
      client.ping(msg);
   }
   
   //Controller logic
   public void setBookingID(int id){
      this.model = (Booking)model;
      model.setBookingID(id);
   }
   
   public boolean authenticate(){
      boolean valid = false;
            
      //Account dbAccount = (Account) client.msgServer("id")[0];
      Account dbAccount = new Account("Marton","240190","asd",4);
            
      if(((LoginPanel)panel).getInputEmail().getText().equalsIgnoreCase(dbAccount.getUserID()) && ((LoginPanel)panel).getInputPassword().getText().equalsIgnoreCase(dbAccount.getPassword())){
         valid = true;
      }
      
      return valid;
   }
}
